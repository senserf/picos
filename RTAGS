This file lists CVS RTAGs pointing to significal commit's:

R050722A:

	Short checksums, encryption, cleaned PHYSOPT's, added PHYSOPT_SESID
	(both in CHIPCON as well as DM2100); station Id is now inserted by
	the transmitter; access to loose pins, including ADC on GP0-GP7 (in
	fact, GP0 is not usable as it is reserved for RSSI).

	phys_dm2100 (...) accepts only two arguments (the SId argument has
	been removed).

	The SId is now automatically inserted by the transmitter (its role
	is to act as the network Id, so it makes sense), but only if it is
	nonzero. Note that you can send a packet without touching the SId
	field by setting the station's SId to zero (PHYSOPT_SESID).

	New functions available from the dm2100 driver
	(see Libs/Lib/phys_DM2100.h):

	pin_get (pn). pn is the pin number (1 - 11, corresponding to GP1-7
	and then CFG0-CFG3 (8-11). Number zero corresponds to GP0, but GP0
	is illegal because it is reserved for RSSI. The function returns the
	value (0/1) of the respective pin.

	pin_set (pn, val) sets or clears the indicated pin (1-11), depending
	on whether val is zero or nonzero.

	pin_get_adc (pin, ref, stime) returns the ADC-converted voltage on the
	indicated pin (1-7 - only P6 pins can be used for this). If ref is
	zero, the reference voltage is 1.5V, otherwise it is 2.5V. stime gives
	(roughly) the sampling time in milliseconds (64 is the max, 0 == 4
	msec should be OK for signals that don't have to be integrated).

	Note that the receiver should be stopped before calling pin_get_adc,
	as the ADC converter is used by the receiver. If the function is
	called while the receiver is active, it returns -1 and does nothing.

	The direction of a pin is input by default. Upon the first call to
	pin_set, the pin becomes output and cannot be used for input any
	more.
	
R050730A:

	Function pin_wait (word pin, word state) for dm2100. pin is between 
	8 and 11 inclusively and corresponds to CFG0-CFG3. It declares a wait
	for the specified pin to go up. The pin value must be checked after
	the event is triggered to make sure that the pin value is in fact
	high. Note: there is no trigger for the pin going down, so this state
	must be polled by the application.

R050730B:

	Fixed pin_wait to operate on CFG1 and CFG2. The value of pin should be
	1 or 2.

R050730C:

	Added p2irq.c that wasn't included in the previous release.

R050730D:

	Added clearing P2IFG after an interrupt.

R050810A:

	Use SMCLK for driving the UARTS. This allows rates above 9600. By
	default, the rate is 19,200 with 7 bits, even partiy, 1 stop.
	Added random delays before transmission to eliminate livelocks.
	In addition to CONTROL/UART_CNTRL_RATE, there is UART_CNTRL_MODE,
	with two word parameters: character width (7/8) and parity (0-even,
	1-odd). The latter only applicable if character width is 7.


R050810B:

	Minimum legitimate packet length defineable as a constant (instead
	of 4 bytes), set to 8 for now. This eliminates more false packets
	from checksumming.
	Long delays (operation ldelay (minutes, state)). Note: 1 minute is
	64 seconds. This way I could avoid a division.

R050811A:

	UART rate calibrated to compensate for the unreliability of SMCLK.
	ACLK used for rates <= 9600 bps.

R050814A:

	UART parameters determined by compilation constants rather than
	application-callable functions. The calibration for SMCLK-driven
	rates is done by UART_CNTRL_CALIBRATE. This operation is void for
	rates driven by ACLK.
	The default rate is 9600-8-N-1. Example (put this in options.sys):

		#define	UART_RATE	19200
		#define	UART_BITS	7
		#define	UART_PARITY	0	// 0-even, 1-odd

	Variables used by the RF driver made global rather than being
	allocated by malloc.

	Fixed mkmk: my previous fix made it incompatible with CyanIDE.

	Added macros: dbg_0(c) -- dbg_a(c) (16 of them). Constants settable
	in options.sys:

		#define	dbg_level	0x800c
		// Activates dbg_2, dbg_3, dbg_f
		#define	dbg_level	0
		// Deactivates all
		#define	dbg_binary	1
		// Selects binary output: 00 06 aa 00 lv xx xx 04, where
		// lv is the level (03 for dbg_03) and xx is the argument

	Modified: memfree (p,s). The second argument (word pointer) returns
	the minimum amount of free memory ever found in the pool. If malloc
	has ever failed, the value is zero.
	Added: word staticsize (void). Returns the amount of memory (in 
	words, as usual) taken by static variables.

R050817A:

	Added M_AMRD, R_AMRD to Apps. They're cleaned up equivalents of
	Master and Reader nodes sent to RFM for their AMR demo.
	Rewritten LibComms.

R050817B:

	Copyrights.

R050820A:

	A few cleanups. Eliminated a race in the scheduler (it wasn't serious,
	but it could occasionally cause a hiccup, especially on the UART).

	Included the kludge for high frequency ACLK crystals. If the declared
	UART rate is 19200, PicOS assumes that ACLK runs from a high frequency
	crystal. HIGH_CRYSTAL_RATE (settable in options.sys) then indicates
	the crystal frequency, which can be 1, 4, or 8 (this is in MHz). If you
	use lower UART rates, everything works as before. This kludge will be
	removed later. It is clearly identifiable and does no harm.

	Added (opitonal) UART buffering on the receiving end. If the constant
	UART_INPUT_BUFFER_LENGTH is set to > 1, then UART input will be
	buffered. Previously, a scheduler action was needed for every input
	character, which could (possibly) cause data loss.

R050820B:

	Attempts at flow control (the code is present, but the signals are not
	visible on the DB9). I am checking it in for the record - no harm.

R050830A:

	Added RTag_RFM, the 1st iteration sent to RFM.
	In Libs/Lib, ser_out, ser_in, __outserial, __inserial were modified
	with bin cmd kludges.
	phys_dm2100.c: adc_disable added to PHYSOPT_RXOFF handling.

R050903A:

	ADC cleanups, change from pulse mode to extended sample mode. The ADC
	clock changed to SMCLK - to make it independent of the ACLK crystal.
	This is in preparation for the truly dual crystal version.
	pin_get_adc (word, word, word, word) has a new argument. The first
	argument is the state to resume the function after signal collection.
	If the state is NULL, the function busy-waits for the result.

	LBT (Listen Before Transmit). Two option.sys parameters:
	LBT_DELAY (default == 0, meaning no LBT). Specifies the number of
	milliseconds (1/1024s) to delay before a transmission.
	LBT_THRESHOLD (default == 2). A value between 0 and 16 specifying
	the RSSI threshold. LBT only works if the receiver is active, and it
	does not damage a reception, should it occur during the waiting
	period. My experiments suggest that LBT_DELAY == 8 and LBT_THRESHOLD
	== 2 are not bad.

	RF options cleaned. Removed the dynamically settable backoff options
	and turned into compilation constants (see sysio.h). The only dynamic
	option that can affect the backoff is PHYSOPT_CAV.

R050911A:

	Crystal issues cleaned up. CRYSTAL_RATE defines the crystal rate and
	can be 32768 or anything >= 1000000. UART rates above 9600 are only
	available with rates >= 1000000.

R050919A:

	Added two functions to get the remaining waiting time of the indicated
	process. dleft (int pid) [pid is the process identifier, e.g., as
	returned by fork or running] returns the remaning waiting time in 
	msecs (1/1024s). If the process is not waiting on a delay, the returned
	value is MAX_UINT. ldleft (int pid, address s) returns the long waiting
	time in minutes (1 min = 64 seconds). If the process is not waiting on
	ldelay, the returned value is MAX_UINT. If the second argument (s) is
	not NULL, it points to a word to contain the residual number of seconds.
	For example, if the process will be awakened after 5 minutes and 61
	seconds, then ldleft returns 5 and *s returns 61. If s is NULL, the
	value returned by ldleft is rounded to the nearest minute, e.g., 3:21
	will be returned as 3, while 3:47 as 4.

	A minor change in TCV: tcvphy_rcv returns 0 if the message was not
	accepted (no claim or no memory) and 1 otherwise. Previously, tcvphy_rcv
	returned no value.

	Fixed a buglet in zzz_malloc pointed out by Wlodek.

	UART phys added: see phys_uart.doc in Docs.

R050921A:

	Changed LED interface to DM2100. If USE_LEDS is zero, LEDs are never
	used to conserve power. LEDs are now configured/unconfigured while
	being turned on/off - to reduce power usage while they are off.
	Application can use the leds (word) function, which only works if
	LEDS_DRIVER is 1.
	PHYSOPT_GETSID returns station Id.

R050928A:

	Fixed a bug in xcvcommon.h (zzr_buffer -> zzx_buffer). Station ID is
	now always set by the transmitter, also when it is zero.
	With a high-rate crystal, the radio is strobed by ACLK rather than
	SMCLK, which should result in a better signal quality.

R051106A:

	Fixed a glitch in mkmk causing misbehavior if directories contained
	files with exotic characters (like ~ for example).

	Included a driver for RF24G. The Taiwanese boards that I have don't
	seem to work, so I cannot test the driver, but it compiles and runs.
	All signals collected from the board appear to be fine.

	fork returns NONE (-1) on too many processes. Previously, the system
	would abort on this error.

R051114A:

	CVS tree restructured to make it possible to checkout and commit
	individual components. In fact, the only thing I did was to move
	Libs under PicOS. Now, PicOS constitutes the core component, with
	SimNets and Apps being independent.

R051127A:

	First cut of the CC1100 driver. Phys interface:

		phys_cc1100 (int id, int mbl);

	Maximum buffer size need not inlcude space for CRC. Also, a written
	packet (tcv_wnp) should not include room for CRC (this is a difference
	w.r.t. CC1000 and DM2100). The two extra bytes are still returned with
	a received packet. The last byte is RSSI (0-255), and the preceding
	byte returns the channel quality assessment, whatever it is. Packet
	length need not be even, but it makes sense to keep it even for
	compatibility.

	By default, the output power is set at 0dBm, which corresponds to the
	value of 127 (RADIO_CONTROL_SETPOWER), i.e., more or less the middle.

	I have also renamed everything related to the old CHIPCON to CC1000
	(constants and file names) - for compatibility.

R051128A:

	LED interface changed. USE_LEDS removed. This functionality is taken
	over by LEDS_DRIVER. Old function leds (word) has been replaced by
	leds (int n, int what), where n is the led number (0-3) and what is
	0 (off), 1 (on), 2 (blinking). Macros LEDI (x,y) used in radio
	drivers have been redefined as leds (x, y).

	mkmk improved a bit. Its expression evaluation heuristics is now
	slightly better. Note that old mkmk may complain about tricky
	#if expressions with the new system.

R051201A:

	CC1100 registers adjusted as per RFM's note.

R051206A:
R051206B:
R051206C:

	EEPROM driver included. The following two functions are available:

	void ee_read (word loc, byte *str, word len)

	Reads len bytes starting from the specified location (<8K). Locations
	wrap around at the end on memory.

	void ee_write (word loc, const byte *str, word len)

	Stores len bytes from str at the indicated location.

	To configure EEPROM driver, put #define EEPROM_DRIVER 1 into
	options.sys.

	Directory Apps/EETest contains a trivial program for testing the
	EEPROM driver.

	RSSI returned by CC1100 in the last byte of a received packet is now
	OK. The last-1 byte contains the channel quality indicator, for what
	it is worth.

R051210A:

	The argument for SETPOWER for CC1100 is between 0 and 7 (inclusively).
	Previously, it was 0-255 scaled to 0-7.
	PicOS version is now 1.5.

	For the GENESIS board:

	leds (0, .)	connectivity diode (GP1, P6.1)
	leds (2, .)	transmitter diode (used by driver) (GP3, P6.3)
	leds (3, .)	receiver diode (used by driver) (GP2, P6.2)

	As before, leds (i, 2) == blinking. One more function,
	void fastblink (f), sets the fast blinking rate (f != 0), or resets
	the default (slow) rate (f == 0). The same rate applies to all blinking
	leds.

	Genesis reset button is on GP0. PLEASE MAKE SURE THAT THE PIN IS PULLED
	UP BEFORE BOOTING THE BOARD (e.g., with a 100K resistor), as otherwise
	it will be constantly rebooting itself (and erasing EEPROM). 

	When the button is pressed, the leds (all of them) will blink once. If
	the button is released in less than 4 sec after the blink, the board
	will reset itself (as after power up). If the button is held for longer,
	the leds will go on, an the board will erase EEPROM. Then the leds
	will blink 7 times and the board will reset.

R051212A:

	Added a test application for CC1100 (CC1100Test) that works like RFPing
	without ACKs, but with a monitoring of packet loss.

	The Genesis reset button is only active if EEPROM support is compiled
	in. This way we can disable that button (note that it is active down)
	for experiments with the prototype board.

R051221A:

	Station Id was not set in the CC1100 transmitter.
	When MALLOC_ALIGN4 == 1, chunks allocated by malloc are longword
	aligned.

R051226A:

	For CC1x00, GETPOWER returns the current transmit power rather than
	RSSI.

	GENESIS reset button pressed during boot erases EEPROM.

	If DIAG_MESSAGES > 2, it represents the amount of EEPROM to be used
	for storing diag messages. In this case, diag messages will not show
	up on the UART but will be stored in a circular buffer at the end
	of EEPROM. The specified size is rounded to up to an entire number
	of pages. For example, suppose that DIAG_MESSAGES == 1020. The upper
	1K (1024 bytes) of EEPROM will be used for the diag buffer. Application
	writes (ww_write) are only allowed to the lower 7K of EEPROM.

	`void ee_erase (void)' added to completely erase the EEPROM.

	ee_write no longer wraps around on addresses exceeding 8K (or whatever
	is available to the application after accounting for the diag buffer).
	An attempt to write past the avalable area triggers a system error.
	ee_read, however, wraps around and can read anything including the
	diag buffer.

	`void ee_dump (void)' dumps the EEPROM diag buffer to the UART (in 
	ASCII). UART_DRIVER is required for that.

R051228A:

	Added Apps/Genesis, with beta 0 for RFM (that's what was sent there).
	GeneIF... and GeneOps... added to Docs.

	Libs/LibComms updated with the newest TARP (for Genesis).

	In Libs/Lib, __inserial.c has a shorter buffer (128->64).

	Removed Libs/LibDiag.

R060103A:

	Fixed an obscure bug in kernel.c causing old and cancelled delays to 
	occasionally reincarnate in most unexpected places.
